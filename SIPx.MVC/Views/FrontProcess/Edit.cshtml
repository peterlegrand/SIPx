@using Syncfusion.EJ2
@using Newtonsoft.Json
@model FrontProcessUpdateGet
@{
    var Term = (List<UITermLanguageCustomizationList>)ViewBag.UITerms;
    var ErrorMessages = (List<ErrorMessage>)ViewBag.ErrorMessages;
    ViewData["Title"] = @Term.Find(x => x.InternalName.Equals("Edit process")).TermString;

    Layout = "_Layout"; }
    <h1><img src="~/images/icons/Process.png" width="50" height="50" />New process</h1>
    <div class=" control-section">
        <div class="container">
            <form method="post">
                <p hidden>
                    <ejs-numerictextbox id="ProcessId" ejs-for="@Model.ProcessId"></ejs-numerictextbox>
                    <ejs-numerictextbox id="ProcessTemplateStageId" ejs-for="@Model.ProcessTemplateStageId"></ejs-numerictextbox>
                </p>
                <h1>@Model.TemplateName</h1>
                @Model.CreatorName
                @Model.CreatedDate
                @*  @Html.EditorForModel()*@
                @for (int i = 0; i < Model.Fields.Count; i++)
                {

                    <div hidden>FieldId</div>
                    <p hidden>
                        <ejs-numerictextbox id="@Model.Fields[i].Control1" ejs-for="@Model.Fields[i].ProcessFieldId"></ejs-numerictextbox>
                        <ejs-numerictextbox id="@Model.Fields[i].Control2" ejs-for="@Model.Fields[i].ProcessTemplateFieldId"></ejs-numerictextbox>
                        <ejs-numerictextbox id="@Model.Fields[i].Control3" ejs-for="@Model.Fields[i].ProcessTemplateFieldTypeId"></ejs-numerictextbox>
                        <ejs-numerictextbox id="@Model.Fields[i].Control4" ejs-for="@Model.Fields[i].ProcessTemplateStageFieldStatusId"></ejs-numerictextbox>
                        <ejs-numerictextbox id="@Model.Fields[i].Control5" ejs-for="@Model.Fields[i].ValueUpdateTypeId"></ejs-numerictextbox>
                    </p>
                    <div class="row">
                        @if (new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 12, 16, 32 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId) && Model.Fields[i].ProcessTemplateStageFieldStatusId != 1) //Everything except buttons
                        {
                            <div class="font-weight-bold col-4">@Model.Fields[i].FieldName</div>
                        }

                        @if (new[] { 1, 2 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden>
                                            <ejs-textbox id="@Model.Fields[i].Control6" ejs-for="@Model.Fields[i].StringValue"></ejs-textbox>
                                        </div>
                                        break;
                                    case 2:
                                        @Model.Fields[i].StringValue
                                        <div hidden>
                                            <ejs-textbox id="@Model.Fields[i].Control6" ejs-for="@Model.Fields[i].StringValue"></ejs-textbox>
                                        </div>
                                        break;
                                    case 3:
                                    case 4:
                                        <ejs-textbox id="@Model.Fields[i].Control6" ejs-for="@Model.Fields[i].StringValue"></ejs-textbox>
                                        break;
                                }
                            </div>
                        }
                        @if (new[] { 3 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden>
                                            <ejs-textbox id="@Model.Fields[i].Control6" ejs-for="@Model.Fields[i].StringValue"></ejs-textbox>
                                        </div>
                                        break;
                                    case 2:
                                        @Model.Fields[i].StringValue
                                        <div hidden>
                                            <ejs-textbox id="@Model.Fields[i].Control6" ejs-for="@Model.Fields[i].StringValue"></ejs-textbox>
                                        </div>
                                        break;
                                    case 3:
                                    case 4:
                                        <ejs-textbox id="@Model.Fields[i].Control6" ejs-for="@Model.Fields[i].StringValue"></ejs-textbox>
                                        break;
                                }
                            </div>
                        }
                        @if (new[] { 4, 5, 6, 7, 8, 9 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden id="wrapper" class="datepicker-section">
                                            <ejs-datepicker allowEdit="true" id="@Model.Fields[i].Control6" calendarMode="Gregorian" dayHeaderFormat="Narrow" placeholder="Choose a Date" ejs-for="@Model.Fields[i].DateTimeValue"></ejs-datepicker>
                                        </div>
                                        break;
                                    case 2:
                                        @Model.Fields[i].DateTimeValue
                                        <div hidden id="wrapper" class="datepicker-section">
                                            <ejs-datepicker allowEdit="true" id="@Model.Fields[i].Control6" calendarMode="Gregorian" dayHeaderFormat="Narrow" placeholder="Choose a Date" ejs-for="@Model.Fields[i].DateTimeValue"></ejs-datepicker>
                                        </div>
                                        break;
                                    case 3:
                                    case 4:
                                        <div id="wrapper" class="datepicker-section">
                                            <ejs-datepicker allowEdit="true" id="@Model.Fields[i].Control6" calendarMode="Gregorian" dayHeaderFormat="Narrow" placeholder="Choose a Date" ejs-for="@Model.Fields[i].DateTimeValue"></ejs-datepicker>
                                        </div>
                                        break;
                                }
                            </div>
                        }
                        @if (new[] { 10 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="offset-4 col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden id="wrapper" class="datepicker-section">
                                            <ejs-button isPrimary="true" name="submit" action="submit" value="@Model.Fields[i].Control6" id="submit">@Model.Fields[i].FieldName</ejs-button>
                                        </div>
                                        break;
                                    case 2:
                                        <ejs-button disabled="true" isPrimary="true" name="submit" action="submit" value="@Model.Fields[i].Control6" id="submit">@Model.Fields[i].FieldName</ejs-button>
                                        break;
                                    case 3:
                                    case 4:
                                        <ejs-button isPrimary="true" name="submit" action="submit" value="@Model.Fields[i].Control6" id="submit">@Model.Fields[i].FieldName</ejs-button>
                                        break;
                                }
                            </div>
                        }
                        @if (new[] { 11 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="offset-4 col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden id="wrapper" class="datepicker-section">
                                            <ejs-button isPrimary="false" name="submit" action="submit" value="@Model.Fields[i].Control6" id="submit">@Model.Fields[i].FieldName</ejs-button>
                                        </div>
                                        break;
                                    case 2:
                                        <ejs-button disabled="true" isPrimary="false" name="submit" action="submit" value="@Model.Fields[i].Control6" id="submit">@Model.Fields[i].FieldName</ejs-button>
                                        break;
                                    case 3:
                                    case 4:
                                        <ejs-button isPrimary="false" name="submit" action="submit" value="@Model.Fields[i].Control6" id="submit">@Model.Fields[i].FieldName</ejs-button>
                                        break;
                                }
                            </div>
                        }
                        @if (new[] { 12, 13 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="offset-4 col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden>
                                            <div class="col-8">
                                                <ejs-dropdownlist dataSource="@Model.Users" ejs-for="@Model.Fields[i].StringValue" id="@Model.Fields[i].Control6">
                                                    <e-dropdownlist-fields text="Name" value="UserId"></e-dropdownlist-fields>
                                                </ejs-dropdownlist>
                                            </div>
                                        </div>
                                        break;
                                    case 2:
                                        @Model.Fields[i].UserName
                                        <div hidden class="col-8">
                                            <ejs-textbox ejs-for="@Model.Fields[i].StringValue" id="@Model.Fields[i].Control6"></ejs-textbox>
                                        </div>
                                        break;
                                    case 3:
                                    case 4:
                                        <div class="col-8">
                                            <ejs-dropdownlist dataSource="@Model.Users" ejs-for="@Model.Fields[i].StringValue" id="@Model.Fields[i].Control6">
                                                <e-dropdownlist-fields text="Name" value="UserId"></e-dropdownlist-fields>
                                            </ejs-dropdownlist>
                                        </div>
                                        break;
                                }
                            </div>
                        }
                        @if (new[] { 14, 15 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="offset-4 col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden>
                                            <div class="col-8">
                                                <ejs-dropdownlist dataSource="@Model.Organizations" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                    <e-dropdownlist-fields text="Name" value="OrganizationId"></e-dropdownlist-fields>
                                                </ejs-dropdownlist>
                                            </div>
                                        </div>
                                        break;
                                    case 2:
                                        @Model.Fields[i].UserName
                                        <div hidden class="col-8">
                                            <ejs-numerictextbox ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6"></ejs-numerictextbox>
                                        </div>
                                        break;
                                    case 3:
                                    case 4:
                                        <div class="col-8">
                                            <ejs-dropdownlist dataSource="@Model.Organizations" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                <e-dropdownlist-fields text="Name" value="OrganizationId"></e-dropdownlist-fields>
                                            </ejs-dropdownlist>
                                        </div>
                                        break;
                                }
                            </div>
                        }
                        @if (new[] { 16, 17 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="offset-4 col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden>
                                            <div class="col-8">
                                                <ejs-dropdownlist dataSource="@Model.Projects" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                    <e-dropdownlist-fields text="Name" value="ProjectId"></e-dropdownlist-fields>
                                                </ejs-dropdownlist>
                                            </div>
                                        </div>
                                        break;
                                    case 2:
                                        @Model.Fields[i].UserName
                                        <div hidden class="col-8">
                                            <ejs-numerictextbox ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6"></ejs-numerictextbox>
                                        </div>
                                        break;
                                    case 3:
                                    case 4:
                                        <div class="col-8">
                                            <ejs-dropdownlist dataSource="@Model.Projects" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                <e-dropdownlist-fields text="Name" value="ProjectId"></e-dropdownlist-fields>
                                            </ejs-dropdownlist>
                                        </div>
                                        break;
                                }
                            </div>
                        }
                        @if (new[] { 16, 17 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="offset-4 col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden>
                                            <div class="col-8">
                                                <ejs-dropdownlist dataSource="@Model.Languages" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                    <e-dropdownlist-fields text="Name" value="LanguageId"></e-dropdownlist-fields>
                                                </ejs-dropdownlist>
                                            </div>
                                        </div>
                                        break;
                                    case 2:
                                        @Model.Fields[i].UserName
                                        <div hidden class="col-8">
                                            <ejs-numerictextbox ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6"></ejs-numerictextbox>
                                        </div>
                                        break;
                                    case 3:
                                    case 4:
                                        <div class="col-8">
                                            <ejs-dropdownlist dataSource="@Model.Languages" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                <e-dropdownlist-fields text="Name" value="LanguageId"></e-dropdownlist-fields>
                                            </ejs-dropdownlist>
                                        </div>
                                        break;
                                }
                            </div>
                        }
                        @if (new[] { 18, 19 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="offset-4 col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden>
                                            <div class="col-8">
                                                <ejs-dropdownlist dataSource="@Model.Languages" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                    <e-dropdownlist-fields text="Name" value="LanguageId"></e-dropdownlist-fields>
                                                </ejs-dropdownlist>
                                            </div>
                                        </div>
                                        break;
                                    case 2:
                                        @Model.Fields[i].UserName
                                        <div hidden class="col-8">
                                            <ejs-numerictextbox ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6"></ejs-numerictextbox>
                                        </div>
                                        break;
                                    case 3:
                                    case 4:
                                        <div class="col-8">
                                            <ejs-dropdownlist dataSource="@Model.Languages" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                <e-dropdownlist-fields text="Name" value="LanguageId"></e-dropdownlist-fields>
                                            </ejs-dropdownlist>
                                        </div>
                                        break;
                                }
                            </div>
                        }
                        @if (new[] { 20, 21 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="offset-4 col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden>
                                            <div class="col-8">
                                                <ejs-dropdownlist dataSource="@Model.Classifications" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                    <e-dropdownlist-fields text="Name" value="ClassificationId"></e-dropdownlist-fields>
                                                </ejs-dropdownlist>
                                            </div>
                                        </div>
                                        break;
                                    case 2:
                                        @Model.Fields[i].UserName
                                        <div hidden class="col-8">
                                            <ejs-numerictextbox ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6"></ejs-numerictextbox>
                                        </div>
                                        break;
                                    case 3:
                                    case 4:
                                        <div class="col-8">
                                            <ejs-dropdownlist dataSource="@Model.Classifications" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                <e-dropdownlist-fields text="Name" value="ClassificationId"></e-dropdownlist-fields>
                                            </ejs-dropdownlist>
                                        </div>
                                        break;
                                }
                            </div>
                        }
                        @if (new[] { 22, 23 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="offset-4 col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden>
                                            <div class="col-8">
                                                <ejs-dropdownlist dataSource="@Model.ClassificationValues" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                    <e-dropdownlist-fields text="Name" value="ClassificationValueId"></e-dropdownlist-fields>
                                                </ejs-dropdownlist>
                                            </div>
                                        </div>
                                        break;
                                    case 2:
                                        @Model.Fields[i].UserName
                                        <div hidden class="col-8">
                                            <ejs-numerictextbox ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6"></ejs-numerictextbox>
                                        </div>
                                        break;
                                    case 3:
                                    case 4:
                                        <div class="col-8">
                                            <ejs-dropdownlist dataSource="@Model.ClassificationValues" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                <e-dropdownlist-fields text="Name" value="ClassificationValueId"></e-dropdownlist-fields>
                                            </ejs-dropdownlist>
                                        </div>
                                        break;
                                }
                            </div>
                        }
                        @if (new[] { 24, 25 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="offset-4 col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden>
                                            <div class="col-8">
                                                <ejs-dropdownlist dataSource="@Model.Contents" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                    <e-dropdownlist-fields text="Title" value="ContentId"></e-dropdownlist-fields>
                                                </ejs-dropdownlist>
                                            </div>
                                        </div>
                                        break;
                                    case 2:
                                        @Model.Fields[i].UserName
                                        <div hidden class="col-8">
                                            <ejs-numerictextbox ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6"></ejs-numerictextbox>
                                        </div>
                                        break;
                                    case 3:
                                    case 4:
                                        <div class="col-8">
                                            <ejs-dropdownlist dataSource="@Model.Contents" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                <e-dropdownlist-fields text="Title" value="ContentId"></e-dropdownlist-fields>
                                            </ejs-dropdownlist>
                                        </div>
                                        break;
                                }
                            </div>
                        }
                        @if (new[] { 26, 27 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="offset-4 col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden>
                                            <div class="col-8">
                                                <ejs-dropdownlist dataSource="@Model.Countries" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                    <e-dropdownlist-fields text="Title" value="CountryId"></e-dropdownlist-fields>
                                                </ejs-dropdownlist>
                                            </div>
                                        </div>
                                        break;
                                    case 2:
                                        @Model.Fields[i].UserName
                                        <div hidden class="col-8">
                                            <ejs-numerictextbox ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6"></ejs-numerictextbox>
                                        </div>
                                        break;
                                    case 3:
                                    case 4:
                                        <div class="col-8">
                                            <ejs-dropdownlist dataSource="@Model.Countries" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                <e-dropdownlist-fields text="Title" value="CountryId"></e-dropdownlist-fields>
                                            </ejs-dropdownlist>
                                        </div>
                                        break;
                                }
                            </div>
                        }
                        @if (new[] { 28, 29 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="offset-4 col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden>
                                            <div class="col-8">
                                                <ejs-dropdownlist dataSource="@Model.SecurityLevels" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                    <e-dropdownlist-fields text="Title" value="SecurityLevelId"></e-dropdownlist-fields>
                                                </ejs-dropdownlist>
                                            </div>
                                        </div>
                                        break;
                                    case 2:
                                        @Model.Fields[i].UserName
                                        <div hidden class="col-8">
                                            <ejs-numerictextbox ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6"></ejs-numerictextbox>
                                        </div>
                                        break;
                                    case 3:
                                    case 4:
                                        <div class="col-8">
                                            <ejs-dropdownlist dataSource="@Model.SecurityLevels" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                <e-dropdownlist-fields text="Title" value="SecurityLevelId"></e-dropdownlist-fields>
                                            </ejs-dropdownlist>
                                        </div>
                                        break;
                                }
                            </div>
                        }
                        @if (new[] { 36, 37 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="offset-4 col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden>
                                            <div class="col-8">
                                                <ejs-dropdownlist dataSource="@Model.Persons" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                    <e-dropdownlist-fields text="Title" value="PersonId"></e-dropdownlist-fields>
                                                </ejs-dropdownlist>
                                            </div>
                                        </div>
                                        break;
                                    case 2:
                                        @Model.Fields[i].UserName
                                        <div hidden class="col-8">
                                            <ejs-numerictextbox ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6"></ejs-numerictextbox>
                                        </div>
                                        break;
                                    case 3:
                                    case 4:
                                        <div class="col-8">
                                            <ejs-dropdownlist dataSource="@Model.Persons" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                                <e-dropdownlist-fields text="Title" value="PersonId"></e-dropdownlist-fields>
                                            </ejs-dropdownlist>
                                        </div>
                                        break;
                                }
                            </div>
                        }
                        @*@if (new[] { 12 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                            {
                                <div class="col-8">
                                    <ejs-dropdownlist dataSource="@Model.Users" ejs-for="@Model.Fields[i].StringValue" id="@Model.Fields[i].Control6">
                                        <e-dropdownlist-fields text="Name" value="UserId"></e-dropdownlist-fields>
                                    </ejs-dropdownlist>
                                </div>
                            }
                            @if (new[] { 16 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                            {
                                <div class="col-8">
                                    <ejs-dropdownlist dataSource="@Model.Projects" ejs-for="@Model.Fields[i].IntValue" id="@Model.Fields[i].Control6">
                                        <e-dropdownlist-fields text="Name" value="ProjectId"></e-dropdownlist-fields>
                                    </ejs-dropdownlist>
                                </div>
                            }*@
                        @if (new[] { 32 }.Contains(Model.Fields[i].ProcessTemplateFieldTypeId))
                        {
                            <div class="col-8">
                                @switch (Model.Fields[i].ProcessTemplateStageFieldStatusId)
                                {
                                    case 1:
                                        <div hidden id="wrapper" class="datepicker-section">
                                            <ejs-richtexteditor ejs-for="@Model.Fields[i].StringValue" id="@Model.Fields[i].Control6" showCharCount="true" actionBegin="handleFullScreen" actionComplete="actionCompleteHandler" maxLength="2000" created="created">
                                                <e-content-template>
                                                </e-content-template>
                                                <e-richtexteditor-toolbarsettings items="@ViewBag.tools">
                                                </e-richtexteditor-toolbarsettings>
                                            </ejs-richtexteditor>
                                        </div>
                                        break;
                                    case 2:
                                        @Html.Raw(@Model.Fields[i].StringValue)
                                        <div hidden id="wrapper" class="datepicker-section">
                                            <ejs-richtexteditor ejs-for="@Model.Fields[i].StringValue" id="@Model.Fields[i].Control6" showCharCount="true" actionBegin="handleFullScreen" actionComplete="actionCompleteHandler" maxLength="2000" created="created">
                                                <e-content-template>
                                                </e-content-template>
                                                <e-richtexteditor-toolbarsettings items="@ViewBag.tools">
                                                </e-richtexteditor-toolbarsettings>
                                            </ejs-richtexteditor>
                                        </div>
                                        break;
                                    case 3:
                                    case 4:
                                        <ejs-richtexteditor ejs-for="@Model.Fields[i].StringValue" id="@Model.Fields[i].Control6" showCharCount="true" actionBegin="handleFullScreen" actionComplete="actionCompleteHandler" maxLength="2000" created="created">
                                            <e-content-template>
                                            </e-content-template>
                                            <e-richtexteditor-toolbarsettings items="@ViewBag.tools">
                                            </e-richtexteditor-toolbarsettings>
                                        </ejs-richtexteditor>
                                        break;
                                }
                            </div>
                        }
                    </div>

                }

            </form>
        </div>
    </div>
    <!--  DashboardLayout element declaration -->
    @*<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.3.0/codemirror.js" type="text/javascript"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.3.0/mode/css/css.js" type="text/javascript"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.3.0/mode/xml/xml.js" type="text/javascript"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.3.0/mode/htmlmixed/htmlmixed.js" type="text/javascript"></script>
        <style>
            .e-code-mirror::before {
                content: '\e345';
            }

            .e-html-preview::before {
                        content: '\e350';
                        }

            .CodeMirror-linenumber,
            .CodeMirror-gutters {
                        display: none;
                        }

            .sb-header {
                            z-index: 100;
                        }

            .sb-content.e-view.hide-header {
                        top: 0 !important;
                        }

            .sb-header.e-view.hide-header {
                        display: none;
                        }

            .e-richtexteditor .e-rte-content .e-content pre {
                        padding: 10px;
                        background: #F4F5F7;
            }

            .highcontrast .e-richtexteditor .e-rte-content .e-content pre {
                        padding: 10px;
                        background: #303030;
            }
        </style>*@

    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.3.0/codemirror.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.3.0/mode/css/css.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.3.0/mode/xml/xml.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.3.0/mode/htmlmixed/htmlmixed.js" type="text/javascript"></script>
    <style>
        .e-code-mirror::before {
            content: '\e345';
        }

        .e-html-preview::before {
            content: '\e350';
        }

        .CodeMirror-linenumber,
        .CodeMirror-gutters {
            display: none;
        }

        .sb-header {
            z-index: 100;
        }

        .sb-content.e-view.hide-header {
            top: 0 !important;
        }

        .sb-header.e-view.hide-header {
            display: none;
        }

        .e-richtexteditor .e-rte-content .e-content pre {
            padding: 10px;
            background: #F4F5F7;
        }

        .highcontrast .e-richtexteditor .e-rte-content .e-content pre {
            padding: 10px;
            background: #303030;
        }
    </style>
    <script type="text/javascript">
        var rteObj, myCodeMirror, textArea;
        function created() {
            rteObj = this;
            textArea = rteObj.contentModule.getEditPanel();
        }
        function mirrorConversion(e) {
            var id = rteObj.getID() + 'mirror-view';
            var mirrorView = rteObj.element.querySelector('#' + id);
            var charCount = rteObj.element.querySelector('.e-rte-character-count');
            if (e.targetItem === 'Preview') {
                textArea.style.display = 'block';
                mirrorView.style.display = 'none';
                textArea.innerHTML = myCodeMirror.getValue();
                charCount.style.display = 'block';
            }
            else {
                if (!mirrorView) {
                    mirrorView = ej.base.createElement('div', { className: 'e-content' });
                    mirrorView.id = id;
                    textArea.parentNode.appendChild(mirrorView);
                }
                else {
                    mirrorView.innerHTML = '';
                }
                textArea.style.display = 'none';
                mirrorView.style.display = 'block';
                renderCodeMirror(mirrorView, defaultRTE.Value);
                charCount.style.display = 'none';
            }
        }
        function renderCodeMirror(mirrorView, content) {
            myCodeMirror = CodeMirror(mirrorView, {
                Value: content,
                lineNumbers: true,
                mode: 'text/html',
                lineWrapping: true,
            });
        }
        function handleFullScreen(e) {
            var sbCntEle = document.querySelector('.sb-content.e-view');
            var sbHdrEle = document.querySelector('.sb-header.e-view');
            if (e.targetItem === 'Maximize') {
                if (ej.base.Browser.isDevice && ej.base.Browser.isIos) {
                    ej.base.addClass([sbCntEle, sbHdrEle], ['hide-header']);
                }
            }
            else if (e.targetItem === 'Minimize') {
                if (ej.base.Browser.isDevice && ej.base.Browser.isIos) {
                    ej.base.removeClass([sbCntEle, sbHdrEle], ['hide-header']);
                }
            }
        }
        function actionCompleteHandler(e) {
            if (e.targetItem && (e.targetItem === 'SourceCode' || e.targetItem === 'Preview')) {
                this.sourceCodeModule.getPanel().style.display = 'none';
                mirrorConversion(e);
            }
            else {
                setTimeout(function () { rteObj.toolbarModule.refreshToolbarOverflow(); }, 400);
            }
        }
    </script>
